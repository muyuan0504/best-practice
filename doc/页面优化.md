### 拆分代码段

-   window.requestAnimationFrame 的 API 调用

-   减少 layout（页面重绘），尽量使用 transform 代替 position/width/height 做动画

-   简化 DOM 结构：DOM 结构越复杂时，需要重绘的元素也就越多；所以 DOM 应该保持简单，特别是需要做动画的 DOM 模块，或者要监听 scroll/mousemove 事件的。

另外，使用 flex 比使用 float 在重绘方面会有优势，flex 需要重绘的元素会比 float 少，使用 flex 布局做动画会更加流畅。

```
使用 flex 布局比 float 布局在做动画时更加流畅，主要是因为两者在渲染和布局计算上的差异。

1. 布局计算方式
float 布局：当使用 float 布局时，浏览器需要进行复杂的布局计算，特别是当元素浮动后，父元素的高度不会自动包裹这些浮动元素。为了避免布局错乱，通常需要额外处理清除浮动，可能导致更多的重排（reflow）。这种额外的计算会消耗更多资源，从而影响动画的流畅性。
flex 布局：与 float 不同，flex 布局是一种更现代的布局方式，能够让容器内的子元素自适应地对齐和分布。浏览器使用 flex 布局时，布局计算更加简单且优化得更好，能够减少不必要的重排，通常能带来更平滑的动画效果。
2. 硬件加速与渲染
float 布局：因为 float 布局的计算和布局可能会涉及较多的重排（reflow），特别是在浮动元素的位置改变时，渲染过程可能不是那么高效。
flex 布局：flex 布局更容易进行优化，浏览器在执行动画时，能够更智能地处理元素的布局和位置，减少了重排，尤其是在使用 transform 或 opacity 动画时，能够利用硬件加速，显著提升性能和流畅度。
3. 简化的布局模型
float 布局：由于 float 布局会使父元素的高度失效，需要额外处理清除浮动（如使用 clearfix），这种额外的工作会使布局复杂化，从而导致更多的计算开销。
flex 布局：flex 布局提供了一种更简单、直观的方式来控制子元素的排列，不需要清除浮动，也不需要额外的布局调整，通常会更容易保持高效的渲染性能。
因此，当做动画时，flex 布局由于其更高效的布局计算和渲染优化，能够提供更加流畅的表现。
```

### 加快页面打开速度

#### 减少渲染堵塞

1. 避免 head 标签 js 堵塞

· 把 script 放到 body 后面

· 给放在 head 标签的 script 加 defer 属性（不推荐）：defer 的脚本会异步加载，但是延后执行，此时脚本的加载不能够影响渲染 DOM 的过程，只能是在渲染完了才能生效；
意味着绑定的 click 事件在整个页面没渲染好之前不能生效。而往往要写在 head 中的 js 是为了页面中间的 script 能调用这些前置变量、函数，或者库，从而影响 DOM 渲染；
加上 defer 之后就违背了本意。
另外，defer 可能会有兼容性问题，在老的浏览器上某些行为表现可能会不一致。
同样地，head 标签里面的 CSS 资源也会 block 页面渲染。

2. 减少 head 标签里的 css 资源

· 不要在 css 里面放太多 base64

· 如果 css 资源比较小，可以考虑把 CSS 写成内联的：减少 https 请求时延

#### 优化图片

1. 使用响应式图片

```html
<picture>
    <source srcset="01.jpg" media="(min-width: 800px)" />
    <source srcset="02.jpg" media="(max-width: 799px)" />
    <img src="default.jpg" alt="" />
</picture>
```

2. 延迟加载图片

#### 压缩和缓存

1. gzip压缩

2. Cache-control || 使用 etag

3. 升级到http2.0

#### 其他

- DNS预读取